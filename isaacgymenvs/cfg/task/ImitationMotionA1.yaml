name: ImitationMotionA1

physics_engine: ${..physics_engine}

# if given, will override the device setting in gym. 
env:
  numEnvs: ${resolve_default:4096,${...num_envs}} 
  envSpacing: 0.8
  maxTime: 15.0 # In seconds

  clipActions: 1.0

  action_scale: 0.3
  kp: 50.0
  kd: 1.2

  motionFn: "pace_remove_yaw.txt" 
  # Offset to Z position of reference motion. Used to lift it off the ground.
  ref_motion_z_offset: 0.0
  # Deviation between sim and ref to reset the environment.
  rootResetDist: 1.0
  # Hides reference character and disables reset conditions.
  testVizMode: False
  testMode: ${resolve_default:False,${...test}} 
  checkpoint: ${...checkpoint}
  
  # Force threshold considered for reset when unwanted links touch the ground.
  reset_contact_thresh: 1.0

  state_dim: 25
  action_dim: 12

  # Dynamic friction is randomly generated and bounded by static friction.
  rand_static_friction: [0.1, 1.5]
  rand_restitution: [0.0, 0.0]

  # Reward components
  weight_dof_pos: 0.5
  weight_dof_vel: 0.05
  weight_ef: 0.2
  weight_root_pose: 0.15
  weight_root_vel: 0.1

  scale_dof_pos: 5.0
  scale_dof_vel: 0.1
  scale_ef: 40.0
  scale_root_pose: 20.0
  scale_root_vel: 2.0

  obs_scales:
    linvel: 2.0
    angvel: 0.25

  feet_contact_threshold: 1.0

  controlFrequencyInv: 4

sim:
  substeps: 1
  dt: 0.005
  use_gpu_pipeline: ${eq:${...pipeline},"gpu"}
  up_axis: 'z'
  gravity: [0.0, 0.0, -9.81]

  physx:
    num_threads: 10
    solver_type: 1
    use_gpu: ${contains:"cuda",${....sim_device}} # set to False to run on CPU
    num_position_iterations: 4
    num_velocity_iterations: 0
    contact_offset: 0.01
    rest_offset: 0.0
    bounce_threshold_velocity: 0.5
    max_depenetration_velocity: 10.0
    default_buffer_size_multiplier: 5.0
    max_gpu_contact_pairs: 8388608 # 8*1024*1024
    num_subscenes: ${....num_subscenes}
    contact_collection: 1 # 0: CC_NEVER (don't collect contact info), 1: CC_LAST_SUBSTEP (collect only contacts on last substep), 2: CC_ALL_SUBSTEPS (default - all contacts)

render:
  enableCameraFollow: True
  cameraFollowEnvId: 0
